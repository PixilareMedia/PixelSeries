---
export interface Props {
  id: string;
  slug: string;
}

const { id, slug } = Astro.props;
---

<div id="anchor-links">
  <button class="anchor-link grid-item-1" id="idButton" title=`Click to copy share link.\nhttps://pixelseries.xyz/u/#${id}`>
    <img class="chainLink grid-item-2" src="/images/icons/chain-link.png" alt="An image of a chain link to help indicate that this is a link that you can click on to share the page."/>
    <div class="grid-item-2">
      <h3 class="id-anchor">Page Id</h3>
      <h3 class="id-anchor" id="idAnchorCopy">{id}</h3>
    </div>
  </button>
  <button class="anchor-link grid-item-1" id="slugButton" title=`Click to copy share link.\nhttps://pixelseries.xyz/u/#${slug}`>
    <img class="chainLink grid-item-2" src="/images/icons/chain-link.png" alt="An image of a chain link to help indicate that this is a link that you can click on to share the page."/>
    <div class="grid-item-2">
      <h3 class="slug-anchor">Page Slug</h3>
      <h3 class="slug-anchor" id="slugAnchorCopy">{slug}</h3>
    </div>
  </button>
</div>

<style>
  #anchor-links {
    position: fixed;
    left: 13.5em;
    bottom: 0em;
    z-index: 95;
    display: grid;
    row-gap: 10px;
    column-gap: 10px;
  }
  #idButton {
    margin: 0em;
    padding: 0em;
  }
  #slugButton {
    margin: 0em;
    padding: 0em;
  }
  
  .grid-item-1 {
    grid-row-start: 1;
    grid-row-end: 2;
  }
  .grid-item-2 {
    grid-row-start: 1;
    grid-row-end: 2;
  }

  .anchor-link {
    background: transparent;
    color: white;
    border: 0em;
    font-size: 0.5em;
    display: grid;
    row-gap: 10px;
    column-gap: 10px;
  }
  .anchor-link:hover {
    cursor: pointer;
  }
  .anchor-link:hover > div > h3:last-child {
    color: rgb(70, 33, 151);
  }
  .chainLink {
    width: 1rem;
    height: 1rem;
    position: relative;
    top: 30%;
    left: 0%;
  }
</style>

<script>
  const idButton = document.getElementById("idButton");
  const slugButton = document.getElementById("slugButton");

  idButton.onclick = () => {copyText(document.getElementById("idAnchorCopy").innerHTML)}
  slugButton.onclick = () => {copyText(document.getElementById("slugAnchorCopy").innerHTML)}

  async function copyText(type) {
    try {
      let hold = location.origin + "/u/#" + type;
      await navigator.clipboard.writeText(hold);
      //console.log('Content copied to clipboard: ', hold);
    } catch(error) {
      console.error('Failed to copy: ', error);
    }
  }
</script>